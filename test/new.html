<!DOCTYPE html>
<meta charset="utf-8">
<style>

    .node {
        stroke: #fff;
        stroke-width: 1.5px;
    }

    .link {
        stroke: #999;
        stroke-opacity: .6;
    }

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

    var width = 960,
        height = 500;

    var color = d3.scale.category20();

    var force = d3.layout.force()
        .charge(-120)
        .linkDistance(30)
        .size([width, height]);

    var svg = d3.select("body").append("svg")
        .attr("width", width)
        .attr("height", height);

    var colorring=new Array(d3.rgb(255,0,0),d3.rgb(255,255,0),d3.rgb(0,255,0),d3.rgb(0,255,255),d3.rgb(0,0,255),d3.rgb(125,0,255));
    var compute=new Array();
    for(var i=0;i<5;i++){
        compute[i]= d3.interpolate(colorring[i],colorring[i+1]);
    }
    var linear = d3.scale.linear()
        .domain([0,30])
        .range([0,1]);

    d3.csv("table.csv",function(error,dataset){
            svg.selectAll("line")
                .data(dataset)
                .enter()
                .append("line")
                .attr("x1", function (d) {
                    return d.x;
                })
                .attr("x2", function (d) {
                    return d.xtarget;
                })
                .attr("y1", function (d) {
                    return d.y;
                })
                .attr("y2", function (d) {
                    return d.ytarget;
                })
                .attr("stroke-width", 2)
                .attr("stroke",   "black")

            svg.selectAll("circle")
                .data(dataset)
                .enter()
                .append("circle")
                .attr("cx", function(d) {
                    return d.x;
                })
                .attr("cy",function(d) {
                    return d.y;
                })
                .attr("fill", function (d,i) {
                    console.log((i-Math.floor(i*5/(dataset.length))*(dataset.length/5))/((dataset.length)/5));
                    return compute[Math.floor(i*5/(dataset.length))]((i-Math.floor(i*5/(dataset.length))*(dataset.length/5))/(dataset.length/5));
                })

                .attr("stroke", "black")
                .attr("stroke-width", 2)
                .attr("r", 5);

//        svg.selectAll("text")
//            .data(dataset)
//            .enter()
//            .append("text")
//            .text(function(d) {
//                return d[0] + "," + d[1];
//            })
//            .attr("x", function(d) {
//                return d[0];
//            })
//            .attr("y", function(d) {
//                return d[1];
//            })
//            .attr("font-family", "sans-serif")
//            .attr("font-size", "11px")
//            .attr("fill", "red");
    });

</script>